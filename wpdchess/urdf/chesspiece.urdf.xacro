<?xml version="1.0"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro">

  <xacro:macro name="chesspiece" params="parent piecename color *origin">
    <joint name="${piecename}_joint}" type="floating">
      <insert_block name="origin" />
      <parent link="${parent}"/>
      <child link="${piecename}"/>
    </joint>
    <link name="${piecename}">
      <inertial>
	<mass value="0.01" />
	<!-- center of mass (com) is defined w.r.t. link local coordinate system -->
	<origin xyz="0 0 0.025" /> 
	<inertia  ixx="0.0001" ixy="0.0"  ixz="0.0"  iyy="0.0001"  iyz="0.0"  izz="0.0001" />
      </inertial>
      <visual>
	<origin xyz="0 0 0.025" rpy="0 0 0" />
	<geometry>
	  <cylinder radius="0.01" length="0.05"/>
	</geometry>
      </visual>
      <collision>
	<origin xyz="0 0 0.025" rpy="0 0 0" />
	<geometry>
	  <cylinder radius="0.01" length="0.05"/>
	</geometry>
      </collision>
    </link>
    <gazebo reference="${piecename}">
      <turnGravityOff>false</turnGravityOff>
      <genTexCoord>true</genTexCoord>
      <kp>100000000.0</kp>
      <kd>1000000.0</kd>
      <material>Gazebo/${color}</material>
      <selfCollide>true</selfCollide>
    </gazebo>
  </xacro:macro>
</robot>
