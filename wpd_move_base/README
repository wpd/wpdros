Adapted from navigation/move_base.
